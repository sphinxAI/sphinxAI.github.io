

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ko" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ko" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pySphinx.src.graphics &mdash; Sphinx 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="색인" href="../../../genindex.html" />
    <link rel="search" title="검색" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Sphinx
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../pySphinx.html">pySphinx</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Sphinx</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">모듈 코드</a> &raquo;</li>
        
      <li>pySphinx.src.graphics</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pySphinx.src.graphics</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot; Sphinx&quot;&quot;&quot;</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">by Jeongwon Lee</span>

<span class="sd">v0.2</span>
<span class="sd">2018.10.17 0:00~3:00am 프로토타입 완성</span>
<span class="sd">2018.10.17 10:00~10:30am 스핑크스 데이터 적용 및 이미지 리사이징, BLOCK 0 먼저 그리고 BLOCK 1 나중에 그리도록 수정</span>
<span class="sd">2018.10.17 5:00~6:00pm ESC 누르면 종료. ALT 키 누르면 erase 모드</span>
<span class="sd">2018.10.17 11:30pm~2:00am 주석, TODO, BLOCK ROW/COL 조정해서 반응속도 향상, GRID를 마우스 주변만 보여주기, SHIFT 누르면 확장 BLOCK 선택</span>

<span class="sd">v0.3</span>
<span class="sd">2018.10.18 9:30~11:30am SphinxAnn  </span>
<span class="sd">https://stackoverflow.com/questions/28282434/how-to-combine-opencv-with-pyqt-to-create-a-simple-gui</span>

<span class="sd">v0.31</span>
<span class="sd">2018.10.20 8:00~11:00am </span>
<span class="sd">2018.10.23 1:30~3:00pm PyQt에서 구현</span>
<span class="sd">2018.10.24 0:30~5:00am opencv 이벤트를 PyQt mouse, key 이벤트에서 구현, loadNextImage</span>
<span class="sd">2018.10.24 10:30 C 키 누르면 grid 초기화</span>

<span class="sd">2018.12.06 CMainWindow 도입. 기존 MyDialog(QDialog)은 QWidget 파생 클래스로 변경하여 central widget 처리</span>
<span class="sd">           statusbar와 toolbar용 임시 아이콘 하나 추가</span>

<span class="sd">2019.01.11 5:00pm~6:50pm sphinx.py에 main 함수 두고 graphics.py 분리           </span>
<span class="sd">2019.01.12 SAT 8:00am~11:00am Graphics.py 레이아웃</span>
<span class="sd">    - Label 배치</span>
<span class="sd">    - 화면 크기를 얻어오기 위해서 구조 변경</span>
<span class="sd">2019.01.12 SAT 1:00pm~4:00pm Graphics.py 레이아웃</span>
<span class="sd">    - PhotoViewer 클래스로 변경</span>
<span class="sd">    </span>
<span class="sd">v0.40</span>
<span class="sd">2019.01.13 SUN 10:00am~1:00pm 클래스 </span>


<span class="sd">&#39;&#39;&#39;</span>

<span class="c1"># https://stackoverflow.com/questions/35508711/how-to-enable-pan-and-zoom-in-a-qgraphicsview/35514531#35514531</span>


<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">--------------------------------------------------------------------------</span>
<span class="sd">                                topLayout</span>
<span class="sd">--------------------------------------------------------------------------</span>
<span class="sd">        |</span>
<span class="sd">        |</span>
<span class="sd">        |                           PhotoViewer</span>
<span class="sd">        |</span>
<span class="sd">        |</span>
<span class="sd">Side    |-----------------------------------------------------------------</span>
<span class="sd">        |</span>
<span class="sd">        |</span>
<span class="sd">        |                           PhotoViewer</span>
<span class="sd">        |</span>
<span class="sd">        |</span>
<span class="sd">--------------------------------------------------------------------------</span>
<span class="sd">                                BottomLayout </span>
<span class="sd">--------------------------------------------------------------------------</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">platform</span>     <span class="c1"># Windows, Mac OS를 구분</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1">#from PyQt5.QtWidgets import QMainWindow</span>
<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="k">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtWidgets</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="k">import</span> <span class="n">QPoint</span><span class="p">,</span> <span class="n">QRect</span><span class="p">,</span> <span class="n">QSize</span><span class="p">,</span> <span class="n">Qt</span>   <span class="c1"># Mouse Press Event</span>
<span class="kn">from</span> <span class="nn">.ContainerImages</span> <span class="k">import</span> <span class="n">ContainerImages</span>
<span class="c1">#import ContainerImages</span>


<div class="viewcode-block" id="MyMainWindow"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.MyMainWindow">[문서]</a><span class="k">class</span> <span class="nc">MyMainWindow</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_UI</span><span class="p">()</span>

<div class="viewcode-block" id="MyMainWindow.init_UI"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.MyMainWindow.init_UI">[문서]</a>    <span class="k">def</span> <span class="nf">init_UI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;Ready&#39;</span><span class="p">)</span>

        <span class="c1"># menubar</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        openAct = QAction()</span>
<span class="sd">        fileMenu = self.menuBar()-&gt;addMenu(tr(&quot;&amp;File&quot;));</span>
<span class="sd">        fileMenu-&gt;addAction(openAct);</span>
<span class="sd">       &quot;&quot;&quot;</span>

        <span class="c1"># toolbar</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        backAct = QAction(QIcon(&quot;images/go-previous.png&quot;), &#39;Back&#39;, self)</span>
<span class="sd">        self.toolbar = self.addToolBar(&#39;Back&#39;)</span>
<span class="sd">        self.toolbar.setIconSize(QSize(100, 100))</span>
<span class="sd">        self.toolbar.addAction(backAct)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#main window</span>
        <span class="n">wg</span> <span class="o">=</span> <span class="n">Graphics</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="n">wg</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Sphinx&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showMaximized</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Graphics"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics">[문서]</a><span class="k">class</span> <span class="nc">Graphics</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Graphics</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="c1"># self.setWindowTitle(&quot;Sphinx&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupLayout</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">ifCrop</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="Graphics.setupLayout"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.setupLayout">[문서]</a>    <span class="k">def</span> <span class="nf">setupLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer1</span> <span class="o">=</span> <span class="n">PhotoViewer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer2</span> <span class="o">=</span> <span class="n">PhotoViewer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Button to change from drag/pan to getting pixel info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer1</span><span class="o">.</span><span class="n">photoClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">photoClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer2</span><span class="o">.</span><span class="n">photoClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">photoClicked</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">btnPixInfo</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QToolButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btnPixInfo</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Pixel Info Mode&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btnPixInfo</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pixInfo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editPixInfo</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editPixInfo</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Component</span>
        <span class="n">topMenuHeight</span> <span class="o">=</span> <span class="mi">80</span>
        <span class="n">topMenuPadding</span> <span class="o">=</span> <span class="mi">10</span>

        <span class="n">btnTitle</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Sample&#39;</span><span class="p">,</span><span class="s1">&#39;Path&#39;</span><span class="p">,</span><span class="s1">&#39;Image&#39;</span><span class="p">,</span> <span class="s1">&#39;Save&#39;</span><span class="p">,</span> <span class="s1">&#39;WW/WL&#39;</span><span class="p">,</span> <span class="s1">&#39;Panning&#39;</span><span class="p">,</span> <span class="s1">&#39;Zoom&#39;</span><span class="p">,</span> <span class="s1">&#39;Fit&#39;</span><span class="p">,</span> <span class="s1">&#39;ROI&#39;</span><span class="p">,</span> <span class="s1">&#39;Crop&#39;</span><span class="p">,</span> <span class="s1">&#39;Quit&#39;</span><span class="p">]</span>
        <span class="n">btnFunction</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fnLoadSample</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnLoadPath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnLoadImage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnSaveImage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnAdjustWL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnPanningImage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnZoomImage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnFitImage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnDrawROI</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnCrop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnQuitExe</span><span class="p">]</span>
        <span class="n">btnNum</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">btnTitle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topMenu</span> <span class="o">=</span> <span class="n">RibbonMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topMenuHeight</span><span class="p">,</span> <span class="n">topMenuPadding</span><span class="p">,</span> <span class="n">btnNum</span><span class="p">,</span> <span class="n">btnTitle</span><span class="p">,</span> <span class="n">btnFunction</span><span class="p">)</span>

        <span class="n">sidebarWidth</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span> <span class="o">=</span> <span class="n">Sidebar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sidebarWidth</span><span class="p">)</span>

        <span class="c1"># Layout</span>
        <span class="n">topLayout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">topLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topMenu</span><span class="p">)</span>

        <span class="n">leftLayout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">leftLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="p">)</span>

        <span class="n">rightLayout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">rightLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewer1</span><span class="p">)</span>
        <span class="n">rightLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewer2</span><span class="p">)</span>

        <span class="n">mainLayout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">mainLayout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">leftLayout</span><span class="p">)</span>
        <span class="n">mainLayout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">rightLayout</span><span class="p">)</span>
        <span class="n">mainLayout</span><span class="o">.</span><span class="n">setStretchFactor</span><span class="p">(</span><span class="n">leftLayout</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">mainLayout</span><span class="o">.</span><span class="n">setStretchFactor</span><span class="p">(</span><span class="n">rightLayout</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">bottomLayout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">bottomLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">btnPixInfo</span><span class="p">)</span>
        <span class="n">bottomLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editPixInfo</span><span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">topLayout</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">mainLayout</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">bottomLayout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graphics.pixInfo"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.pixInfo">[문서]</a>    <span class="k">def</span> <span class="nf">pixInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer1</span><span class="o">.</span><span class="n">toggleDragMode</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer2</span><span class="o">.</span><span class="n">toggleDragMode</span><span class="p">()</span></div>

<div class="viewcode-block" id="Graphics.photoClicked"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.photoClicked">[문서]</a>    <span class="k">def</span> <span class="nf">photoClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewer1</span><span class="o">.</span><span class="n">dragMode</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsView</span><span class="o">.</span><span class="n">NoDrag</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">editPixInfo</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">, </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewer2</span><span class="o">.</span><span class="n">dragMode</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsView</span><span class="o">.</span><span class="n">NoDrag</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">editPixInfo</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">, </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()))</span></div>

<div class="viewcode-block" id="Graphics.fnLoadImage"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnLoadImage">[문서]</a>    <span class="k">def</span> <span class="nf">fnLoadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        하나의 컨테이너 영상만 로딩하는 함수</span>
<span class="sd">        하나의 컨테이너 영상을 선택하면 파일명을 분석하여 SIDE, TOP영상을 모두 로딩</span>
<span class="sd">        2 Center데이터를 기준으로 하며, 파일명의 끝에 붙는 SIDE, TOP 정보로 컨테이너 영상 확인</span>

<span class="sd">        if info.exists():</span>
<span class="sd">            컨테이너 영상 파일</span>
<span class="sd">        else</span>
<span class="sd">            비 컨테이너 영상 파일</span>

<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">uname</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Windows&#39;</span><span class="p">:</span>
            <span class="n">default_path</span> <span class="o">=</span> <span class="s2">&quot;Z:/data/image/2Center/&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">default_path</span> <span class="o">=</span> <span class="s1">&#39;./&#39;</span>

        <span class="c1"># 파일 열기용 다이얼로그</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">Options</span><span class="p">()</span>
        <span class="n">options</span> <span class="o">|=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">DontUseNativeDialog</span>
        <span class="c1"># 인천 2센터만 로딩하면 되기 때문에 tif파일만 보이게 설정, 만약 3센터 데이터도 보고 싶다면 (*.tif) -&gt; (*.tif *.img) 변경하면 됨</span>
        <span class="n">fileName</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s2">&quot;X-ray Container Image Load&quot;</span><span class="p">,</span> <span class="n">default_path</span><span class="p">,</span><span class="s2">&quot;Image Files(*.tif)&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">fileName</span><span class="p">:</span>
            <span class="c1"># 다이얼로그로 얻어진 정보에서 영상 정보 추출</span>
            <span class="n">fileInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnExtractionInfoSelection</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

            <span class="c1"># 2센터 컨테이너 영상이 존재하면 영상 로딩</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fileInfo</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Incheon_2Center&#39;</span><span class="p">:</span>

                    <span class="c1"># 2센터의 TOP영상이 존재하면 영상 로딩</span>
                    <span class="k">if</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">loadPath</span> <span class="o">=</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;TOP.tif&#39;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">orgImage1</span> <span class="o">=</span> <span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">loadPath</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">**</span> <span class="mi">18</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">orgImage1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">qImage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnConvertGray2QPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">orgImage1</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">viewer1</span><span class="o">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="n">qImage</span><span class="p">))</span>
                    <span class="c1"># 2센터의 SIDE영상이 존재하면 영상 로딩</span>
                    <span class="k">if</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">loadPath</span> <span class="o">=</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;SIDE.tif&#39;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">orgImage2</span> <span class="o">=</span> <span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">loadPath</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">**</span> <span class="mi">18</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">orgImage2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">qImage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnConvertGray2QPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">orgImage2</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">viewer2</span><span class="o">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="n">qImage</span><span class="p">))</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">thumbnail</span><span class="o">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="n">qImage</span><span class="p">))</span>

                <span class="k">elif</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Incheon_3Center&#39;</span><span class="p">:</span>

                    <span class="c1"># 3센터의 high영상이 존재하면 영상 로딩</span>
                    <span class="k">if</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">loadPath</span> <span class="o">=</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;high.img&#39;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">orgImage1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnLoading3CenterRawImage</span><span class="p">(</span><span class="n">fileInfo</span><span class="p">,</span> <span class="n">loadPath</span><span class="p">)</span>

                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">orgImage1</span> <span class="o">==</span> <span class="p">[]:</span>
                            <span class="n">qImage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnConvertGray2QPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">orgImage1</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">viewer1</span><span class="o">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="n">qImage</span><span class="p">))</span>
                    <span class="c1"># 3센터의 low영상이 존재하면 영상 로딩</span>
                    <span class="k">if</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">loadPath</span> <span class="o">=</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">fileInfo</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;low.img&#39;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">orgImage2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnLoading3CenterRawImage</span><span class="p">(</span><span class="n">fileInfo</span><span class="p">,</span> <span class="n">loadPath</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">orgImage2</span> <span class="o">==</span> <span class="p">[]:</span>
                            <span class="n">qImage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnConvertGray2QPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">orgImage2</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">viewer2</span><span class="o">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="n">qImage</span><span class="p">))</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">thumbnail</span><span class="o">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="n">qImage</span><span class="p">))</span>

                <span class="c1">#파일명을 갱신</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">editID</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fileInfo</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span></div>

<div class="viewcode-block" id="Graphics.fnConvertGray2QPixmap"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnConvertGray2QPixmap">[문서]</a>    <span class="k">def</span> <span class="nf">fnConvertGray2QPixmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        0~1 범위를 갖는 영상을 8bit영상으로 변환 후 QPixmap 입력 데이터 타입으로 변환</span>

<span class="sd">        :param img: 0~1 범위를 갖는 영상</span>
<span class="sd">        :return: QPixmap에 입력된 RGB</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">image8bit</span> <span class="o">=</span> <span class="p">(</span><span class="n">image</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image8bit</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">image8bit</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">tempImage</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image8bit</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_GRAY2RGB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tempImage</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image8bit</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>

        <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">byteValue</span> <span class="o">=</span> <span class="n">tempImage</span><span class="o">.</span><span class="n">shape</span>
        <span class="n">byteValue</span> <span class="o">=</span> <span class="n">byteValue</span> <span class="o">*</span> <span class="n">width</span>

        <span class="n">qImage</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QImage</span><span class="p">(</span><span class="n">tempImage</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">byteValue</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QImage</span><span class="o">.</span><span class="n">Format_RGB888</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">qImage</span></div>

<div class="viewcode-block" id="Graphics.fnLoadSample"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnLoadSample">[문서]</a>    <span class="k">def</span> <span class="nf">fnLoadSample</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        샘플 영상 로딩</span>
<span class="sd">        :return:</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer1</span><span class="o">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;top.jpg&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer2</span><span class="o">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;side.jpg&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="Graphics.fnLoadPath"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnLoadPath">[문서]</a>    <span class="k">def</span> <span class="nf">fnLoadPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Graphics.fnSaveImage"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnSaveImage">[문서]</a>    <span class="k">def</span> <span class="nf">fnSaveImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Graphics.fnAdjustWL"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnAdjustWL">[문서]</a>    <span class="k">def</span> <span class="nf">fnAdjustWL</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Graphics.fnPanningImage"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnPanningImage">[문서]</a>    <span class="k">def</span> <span class="nf">fnPanningImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Graphics.fnZoomImage"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnZoomImage">[문서]</a>    <span class="k">def</span> <span class="nf">fnZoomImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Graphics.fnFitImage"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnFitImage">[문서]</a>    <span class="k">def</span> <span class="nf">fnFitImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer1</span><span class="o">.</span><span class="n">fitInView</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer2</span><span class="o">.</span><span class="n">fitInView</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">thumbnail</span><span class="o">.</span><span class="n">fitInView</span><span class="p">()</span></div>

<div class="viewcode-block" id="Graphics.fnDrawROI"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnDrawROI">[문서]</a>    <span class="k">def</span> <span class="nf">fnDrawROI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Graphics.fnCrop"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnCrop">[문서]</a>    <span class="k">def</span> <span class="nf">fnCrop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
<span class="c1">####### 2019.1.21 j.w.jeong</span>
<span class="c1">####### temporarily read image files directly</span>
        <span class="k">pass</span></div>
        <span class="c1"># load sample images for container side/top images</span>
<span class="c1">#</span>
<span class="c1">#         imageSide = cv2.imread(&#39;side.jpg&#39;)</span>
<span class="c1">#         imageTop = cv2.imread(&#39;top.jpg&#39;)</span>
<span class="c1">#</span>
<span class="c1">#         # auxiliary codes for loading &amp; transforming &#39;tif&#39; images into internal 8-bit RGB images</span>
<span class="c1">#</span>
<span class="c1"># #         image_side = cv2.imread(&#39;tif_side.tif&#39;,-1)</span>
<span class="c1"># #         image_top = cv2.imread(&#39;tif_top.tif&#39;,-1)</span>
<span class="c1"># #         image_side = (image_side * 255.0/262144.0).round().astype(np.uint8)</span>
<span class="c1"># #         image_top = (image_top *255.0/262144.0).round().astype(np.uint8)</span>
<span class="c1"># #         image_side = cv2.cvtColor(image_side,cv2.COLOR_GRAY2RGB)</span>
<span class="c1"># #         image_top = cv2.cvtColor(image_top,cv2.COLOR_GRAY2RGB)</span>
<span class="c1">#</span>
<span class="c1">#         # extract bounding boxes&#39; coordinates (x1,y1,x2,y2,x3,y3,x4,y4) in pixels from container images</span>
<span class="c1">#         #</span>
<span class="c1">#         #   (x1,y1)                             (x2,y2)</span>
<span class="c1">#         #     +------------------------------------+</span>
<span class="c1">#         #     |                                    |----</span>
<span class="c1">#         #     |                            (x3,y3) |    \</span>
<span class="c1">#         #     +====================================+     |</span>
<span class="c1">#         #   (x4,y4)     OOO                OOO     +-OO--+</span>
<span class="c1">#         #</span>
<span class="c1">#</span>
<span class="c1">#         ContainerImage = ContainerImages(imageSide,imageTop)</span>
<span class="c1">#         _,_,_,_ = ContainerImage.preprocessImageSide(False)</span>
<span class="c1">#         x1Side,y1Side,x2Side,y2Side,x3Side,y3Side,x4Side,y4Side,_,_,_,_,_ = ContainerImage.getBoundingBoxSide(False)</span>
<span class="c1"># #         imageSide = ContainerImage.getContainerImageSide(False)</span>
<span class="c1">#         _,_,_,_ = ContainerImage.preprocessImageTop(False)</span>
<span class="c1">#         x1Top,y1Top,x2Top,y2Top,x3Top,y3Top,x4Top,y4Top,_,_,_,_,_ = ContainerImage.getBoundingBoxTop(False)</span>
<span class="c1"># #         imageTop = ContainerImage.getContainerImageTop(False)</span>
<span class="c1">#</span>
<span class="c1">#         # prepare bounding boxes&#39; coordinates to draw polygons for bounding boxes</span>
<span class="c1">#</span>
<span class="c1">#         poly = []</span>
<span class="c1">#         poly.append([x1Side,y1Side])</span>
<span class="c1">#         poly.append([x2Side,y2Side])</span>
<span class="c1">#         poly.append([x3Side,y3Side])</span>
<span class="c1">#         poly.append([x4Side,y4Side])</span>
<span class="c1">#         poly = (np.array(poly,np.int32)).reshape((-1,1,2))</span>
<span class="c1">#         imageSide = cv2.polylines(imageSide,[poly],True,(255,0,0),10)</span>
<span class="c1">#</span>
<span class="c1">#         poly = []</span>
<span class="c1">#         poly.append([x1Top,y1Top])</span>
<span class="c1">#         poly.append([x2Top,y2Top])</span>
<span class="c1">#         poly.append([x3Top,y3Top])</span>
<span class="c1">#         poly.append([x4Top,y4Top])</span>
<span class="c1">#         poly = (np.array(poly,np.int32)).reshape((-1,1,2))</span>
<span class="c1">#         imageTop = cv2.polylines(imageTop,[poly],True,(0,0,255),10)</span>
<span class="c1">#</span>
<span class="c1">#         # transform array to qpixmap</span>
<span class="c1">#</span>
<span class="c1">#         imageTop = self.fnConvertGray2QPixmap(imageTop, 256)</span>
<span class="c1">#         imageSide = self.fnConvertGray2QPixmap(imageSide, 256)</span>
<span class="c1">#</span>
<span class="c1">#         self.ifCrop = True</span>
<span class="c1">#</span>
<span class="c1">#         # show qpixmap</span>
<span class="c1">#</span>
<span class="c1">#         self.viewer1.setPhoto(QtGui.QPixmap(imageTop))</span>
<span class="c1">#         self.viewer2.setPhoto(QtGui.QPixmap(imageSide))</span>

<span class="c1">#     def paintEvent(self,event):</span>
<span class="c1">#         qp = QtGui.QPainter()</span>
<span class="c1">#         qp.begin(self)</span>
<span class="c1">#         </span>
<span class="c1">#         qp.setPen(QtGui.QPen(Qt.darkGreen, 4)) </span>
<span class="c1">#         qp.drawEllipse(QPoint(500,600),300,300) </span>
<span class="c1"># #         qp.setPen(QtGui.QPen(Qt.blue, 20, join = Qt.MiterJoin)) </span>
<span class="c1"># #         qp.drawRect(100,100,100,100)</span>
<span class="c1">#         qp.end()</span>
<span class="c1">#         pass</span>

<span class="c1">####### 2019.1.21 j.w.jeong</span>

<div class="viewcode-block" id="Graphics.fnQuitExe"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnQuitExe">[문서]</a>    <span class="k">def</span> <span class="nf">fnQuitExe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span></div>


<div class="viewcode-block" id="Graphics.fnLoading3CenterRawImage"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnLoading3CenterRawImage">[문서]</a>    <span class="k">def</span> <span class="nf">fnLoading3CenterRawImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">loadPath</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        3센터의 raw데이터를 읽어오기</span>

<span class="sd">        :param info: 컨테이너 정보가 들어있는 리스트, 입출항 정보가 raw파일안에 들어 있기 때문에 갱신하기 위해 입력으로 사용</span>
<span class="sd">        :param loadPath: 읽어올 3센터 영상 위치</span>
<span class="sd">        :return: 영상데이터</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># 3센터 raw파일의 헤더의 크기는 36byte이지만 uint16으로 읽어오기 때문에 size를 16으로 설정</span>
        <span class="n">headerSize</span> <span class="o">=</span> <span class="mi">16</span>

        <span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s1">&#39;uint16&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">loadPath</span><span class="p">):</span>

            <span class="n">fid</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">loadPath</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">dtype</span><span class="p">)</span>
            <span class="n">fid</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="n">header</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">headerSize</span><span class="p">]</span>

            <span class="c1">#endian 바꾸기</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">byteswap</span><span class="p">()</span>

            <span class="n">w</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">header</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">h</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">header</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">data</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">headerSize</span> <span class="o">+</span> <span class="p">(</span><span class="n">w</span> <span class="o">*</span> <span class="n">h</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">[]</span>

            <span class="n">img</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">headerSize</span><span class="p">:</span><span class="n">headerSize</span> <span class="o">+</span> <span class="p">(</span><span class="n">h</span><span class="o">*</span><span class="n">w</span><span class="p">)]</span>

            <span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flipud</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">byteswap</span><span class="p">())</span>

            <span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>

            <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">info</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">header</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span>
                <span class="n">info</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">header</span><span class="p">[</span><span class="mi">13</span><span class="p">])</span>
                <span class="n">info</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">header</span><span class="p">[</span><span class="mi">14</span><span class="p">])</span>

            <span class="n">img</span> <span class="o">=</span> <span class="p">(</span><span class="n">img</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">16</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
            
            <span class="k">return</span> <span class="n">img</span></div>

<div class="viewcode-block" id="Graphics.fnExtractionInfoSelection"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnExtractionInfoSelection">[문서]</a>    <span class="k">def</span> <span class="nf">fnExtractionInfoSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        선택된 정보에서 파일로딩에 필요한 정보를 추출해주는 함수</span>
<span class="sd">        영상 로딩은 하지 않음</span>

<span class="sd">        :param path: 선택된 파일/폴더 명</span>
<span class="sd">        :param mode: 선택된 정보가 파일/폴더 인지를 확인하는 정보, mode == 0은 파일이며 mode == 1은 폴더</span>
<span class="sd">        :return: [컨테이너번호,  적하목록 관리번호, path, 순수 파일명, 입출항년도, 입출항월, 입출항일, 촬영기기정보, min, max, TOP or High 영상 유무, SIDE or Low영상 유무 ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># 선택된 파일에서 추출한 정보, [컨테이너번호,  적하목록 관리번호, path, 순수 파일명, 입출항년도, 입출항월, 입출항일, 촬영기기정보, min, max, TOP or High 영상 유무, SIDE or Low영상 유무 ]</span>

        <span class="c1">#파일의 경로 저장(입력이 폴더 이거나 파일이거나 상관없이 수행)</span>
        <span class="n">basePath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="c1">#입력이 파일일 경우, 파일명에서 컨테이너 번호와 BL번호 추출</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>

            <span class="c1"># 확장자 확인</span>
            <span class="c1"># 확장자에 따라 정보 추출 방법이 달라짐</span>
            <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

            <span class="c1"># 파일명에서 확장자 제거</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="c1"># 파일명에서 SIDE, TOP, high, low 등 불필요한 문자 제거</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnExtractionRealFileName</span><span class="p">(</span> <span class="n">fileName</span> <span class="p">)</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[]</span>

            <span class="n">fileName</span> <span class="o">=</span> <span class="n">fileName</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">index</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">extension</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;.tif&#39;</span><span class="p">:</span>
                <span class="c1"># 파일명에서 정보 추출</span>
                <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnExtractionInfoFile2Center</span><span class="p">(</span><span class="n">basePath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">extension</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;.img&#39;</span><span class="p">:</span>
                <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnExtractionInfoFile3Center</span><span class="p">(</span><span class="n">basePath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">info</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># 확인된 확장자가 아닐경우 [] 리턴</span>

        <span class="k">return</span> <span class="n">info</span></div>

<div class="viewcode-block" id="Graphics.fnExtractionRealFileName"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnExtractionRealFileName">[문서]</a>    <span class="k">def</span> <span class="nf">fnExtractionRealFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileName</span><span class="p">):</span>
        <span class="n">subTitle</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;SIDE&#39;</span><span class="p">,</span> <span class="s1">&#39;TOP&#39;</span><span class="p">,</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="s1">&#39;material&#39;</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">subTitle</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="n">index</span></div>

<div class="viewcode-block" id="Graphics.fnExtractionInfoFile2Center"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnExtractionInfoFile2Center">[문서]</a>    <span class="k">def</span> <span class="nf">fnExtractionInfoFile2Center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">fileName</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            파일명에서 컨테이너 번호, BL번호, TOP, SIDE 영상 유무 확인</span>

<span class="sd">            :param path: 파일명, 불필요한 정보가 제거된 경로 정보</span>
<span class="sd">            :param fileName:  경로가 제거된 파일</span>
<span class="sd">            :return: [컨테이너번호,  적하목록 관리번호, path, 입출항년도, 입출항월, 입출항일, 촬영기기정보, min, max, TOP or High 영상 유무, SIDE or Low영상 유무], TOP/SIDE 영상이 없다면 []</span>
<span class="sd">            &quot;&quot;&quot;</span>

            <span class="c1"># 2. 컨테이너 번호와 적하목록 관리번호를 리스트 형태로 저장</span>
            <span class="n">conInfo</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>

            <span class="c1"># 3. 경로 저장</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

            <span class="c1">#    3센터에서 파일명정보를 따로 저장시킬 필요가 있어 2센터도 같이 저장</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>

            <span class="c1"># 5. 입출항날짜 정보</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1">#경로의 마지막 위치가 날짜(yymmdd) 정보임</span>

            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;20&#39;</span><span class="o">+</span><span class="n">temp</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span> <span class="c1">#년 정보</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">])</span> <span class="c1">#월 정보</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">])</span> <span class="c1">#일 정보</span>

            <span class="c1"># 6. 촬영 장소 정보</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Incheon_2Center&#39;</span><span class="p">)</span>

            <span class="c1"># 7. min값 입력</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

            <span class="c1"># 8. max값 입력</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">18</span><span class="p">))</span>

            <span class="c1"># 9. SIDE, TOP 영상 존재 여부 확인 후 conInfo에 저장</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span> <span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;TOP.tif&#39;</span><span class="p">):</span>
                <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span> <span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;SIDE.tif&#39;</span><span class="p">):</span>
                <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

            <span class="k">return</span> <span class="n">conInfo</span></div>

<div class="viewcode-block" id="Graphics.fnExtractionInfoFile3Center"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Graphics.fnExtractionInfoFile3Center">[문서]</a>    <span class="k">def</span> <span class="nf">fnExtractionInfoFile3Center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">fileName</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            파일명에서 컨테이너 번호, 적하목록 관리 번호 등 정보 추출</span>

<span class="sd">            :param path: 파일명, 불필요한 정보가 제거된 경로 정보</span>
<span class="sd">            :param fileName:  경로가 제거된 파일</span>
<span class="sd">            :return: [컨테이너번호,  적하목록 관리번호, path, 입출항년도, 입출항월, 입출항일, 촬영기기정보, min, max, TOP or High 영상 유무, SIDE or Low영상 유무], TOP/SIDE 영상이 없다면 0, 있다면 1</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># 컨테이너 번호와 적하목록 관리번호를 리스트 형태로 저장</span>
            <span class="c1">#   파일의 마지막 경로에 있음</span>
            <span class="n">conInfo</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>

            <span class="c1"># 3. 경로 저장</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

            <span class="c1">#  3센터에서 파일명정보를 따로 저장시킬 필요가 있어 2센터도 같이 저장</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>

            <span class="c1"># 5. 입출항날짜 정보는 raw데이터 앞에 존재하기 때문에 우선 비워둠</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="c1">#년 정보</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="c1">#월 정보</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="c1">#일 정보</span>

            <span class="c1"># 6. 촬영 장소 정보</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Incheon_3Center&#39;</span><span class="p">)</span>

            <span class="c1"># 7. min값 입력</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

            <span class="c1"># 8. max값 입력</span>
            <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">16</span><span class="p">))</span>

            <span class="c1"># 9. high, low 영상 존재 여부 확인 후 conInfo에 저장</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span> <span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;high.img&#39;</span><span class="p">):</span>
                <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span> <span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;low.img&#39;</span><span class="p">):</span>
                <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">conInfo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

            <span class="k">return</span> <span class="n">conInfo</span></div></div>

<div class="viewcode-block" id="RibbonMenu"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.RibbonMenu">[문서]</a><span class="k">class</span> <span class="nc">RibbonMenu</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">padding</span><span class="p">,</span> <span class="n">btnNum</span><span class="p">,</span> <span class="n">btnTitle</span><span class="p">,</span> <span class="n">btnFunction</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">RibbonMenu</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;background-color:rgb(147,147,147); border-color: black; border: 1px;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span> <span class="o">|</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignVCenter</span><span class="p">)</span>

        <span class="n">btnHeight</span> <span class="o">=</span> <span class="n">height</span> <span class="o">-</span> <span class="n">padding</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="n">btnWidth</span> <span class="o">=</span> <span class="n">btnHeight</span>
        <span class="n">btnList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">btnNum</span><span class="p">):</span>
            <span class="n">btn</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">btnTitle</span><span class="p">):</span>
                <span class="n">btn</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">btnTitle</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">btnFunction</span><span class="p">):</span>
                <span class="n">btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">btnFunction</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">btn</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRect</span><span class="p">(</span><span class="n">padding</span> <span class="o">+</span> <span class="p">(</span><span class="n">btnWidth</span><span class="o">+</span><span class="n">padding</span><span class="p">)</span><span class="o">*</span><span class="n">i</span><span class="p">,</span> <span class="n">padding</span><span class="p">,</span> <span class="n">height</span> <span class="o">-</span> <span class="n">padding</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">height</span> <span class="o">-</span> <span class="n">padding</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
            <span class="n">btn</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;background-color:rgb(211,211,211); border: 1px white; border-radius: 5px;&quot;</span><span class="p">)</span>
            <span class="n">btnList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">btn</span><span class="p">)</span></div>

<div class="viewcode-block" id="Sidebar"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Sidebar">[문서]</a><span class="k">class</span> <span class="nc">Sidebar</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Sidebar</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUI</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>

<div class="viewcode-block" id="Sidebar.setupUI"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.Sidebar.setupUI">[문서]</a>    <span class="k">def</span> <span class="nf">setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="mi">700</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;background-color:rgb(177,177,177); border: 1px&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span> <span class="o">|</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignVCenter</span><span class="p">)</span>

        <span class="n">sidebarTitle</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="s2">&quot;Sidebar&quot;</span><span class="p">)</span>
        <span class="n">sidebarTitle</span><span class="o">.</span><span class="n">setMinimumHeight</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">sidebarTitle</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span> <span class="o">|</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignVCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editID</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="s2">&quot;Filename&quot;</span><span class="p">)</span>
        <span class="n">editManifest</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTextEdit</span><span class="p">(</span><span class="s2">&quot;Manifest Data&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">thumbnail</span> <span class="o">=</span> <span class="n">PhotoViewer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thumbnail</span><span class="o">.</span><span class="n">setMaximumHeight</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thumbnail</span><span class="o">.</span><span class="n">viewport</span><span class="p">()</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thumbnail</span><span class="o">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="s1">&#39;side.jpg&#39;</span><span class="p">))</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">sidebarTitle</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editID</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">editManifest</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div></div>




<div class="viewcode-block" id="PhotoViewer"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.PhotoViewer">[문서]</a><span class="k">class</span> <span class="nc">PhotoViewer</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsView</span><span class="p">):</span>
    <span class="n">photoClicked</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QPoint</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PhotoViewer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUI</span><span class="p">()</span>

        <span class="c1"># ROI rubber band 생성</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rubberBand</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QRubberBand</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QRubberBand</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rubberBand</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QRect</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">QPoint</span><span class="p">()</span>

        <span class="c1"># self.rubberBand.show()</span>

<div class="viewcode-block" id="PhotoViewer.setupUI"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.PhotoViewer.setupUI">[문서]</a>    <span class="k">def</span> <span class="nf">setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_empty</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsScene</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_photo</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsPixmapItem</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_photo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setScene</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTransformationAnchor</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsView</span><span class="o">.</span><span class="n">AnchorUnderMouse</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setResizeAnchor</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsView</span><span class="o">.</span><span class="n">AnchorUnderMouse</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setVerticalScrollBarPolicy</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ScrollBarAlwaysOff</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHorizontalScrollBarPolicy</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ScrollBarAlwaysOff</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setBackgroundBrush</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QBrush</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFrameShape</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QFrame</span><span class="o">.</span><span class="n">NoFrame</span><span class="p">)</span></div>

<div class="viewcode-block" id="PhotoViewer.hasPhoto"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.PhotoViewer.hasPhoto">[문서]</a>    <span class="k">def</span> <span class="nf">hasPhoto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_empty</span></div>

<div class="viewcode-block" id="PhotoViewer.fitInView"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.PhotoViewer.fitInView">[문서]</a>    <span class="k">def</span> <span class="nf">fitInView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">rect</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_photo</span><span class="o">.</span><span class="n">pixmap</span><span class="p">()</span><span class="o">.</span><span class="n">rect</span><span class="p">())</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rect</span><span class="o">.</span><span class="n">isNull</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setSceneRect</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasPhoto</span><span class="p">():</span>
                <span class="n">unity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">()</span><span class="o">.</span><span class="n">mapRect</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">unity</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">unity</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
                <span class="n">viewrect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewport</span><span class="p">()</span><span class="o">.</span><span class="n">rect</span><span class="p">()</span>
                <span class="n">scenerect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">()</span><span class="o">.</span><span class="n">mapRect</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
                <span class="n">factor</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">viewrect</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="n">scenerect</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span>
                             <span class="n">viewrect</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">/</span> <span class="n">scenerect</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">factor</span><span class="p">,</span> <span class="n">factor</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="PhotoViewer.setPhoto"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.PhotoViewer.setPhoto">[문서]</a>    <span class="k">def</span> <span class="nf">setPhoto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pixmap</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">pixmap</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">pixmap</span><span class="o">.</span><span class="n">isNull</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_empty</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setDragMode</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsView</span><span class="o">.</span><span class="n">ScrollHandDrag</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_photo</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">pixmap</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_empty</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setDragMode</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsView</span><span class="o">.</span><span class="n">NoDrag</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_photo</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fitInView</span><span class="p">()</span></div>

<div class="viewcode-block" id="PhotoViewer.wheelEvent"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.PhotoViewer.wheelEvent">[문서]</a>    <span class="k">def</span> <span class="nf">wheelEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasPhoto</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">angleDelta</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.25</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">factor</span> <span class="o">=</span> <span class="mf">0.8</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">factor</span><span class="p">,</span> <span class="n">factor</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fitInView</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="PhotoViewer.toggleDragMode"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.PhotoViewer.toggleDragMode">[문서]</a>    <span class="k">def</span> <span class="nf">toggleDragMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dragMode</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsView</span><span class="o">.</span><span class="n">ScrollHandDrag</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setDragMode</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsView</span><span class="o">.</span><span class="n">NoDrag</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_photo</span><span class="o">.</span><span class="n">pixmap</span><span class="p">()</span><span class="o">.</span><span class="n">isNull</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setDragMode</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGraphicsView</span><span class="o">.</span><span class="n">ScrollHandDrag</span><span class="p">)</span></div>

<div class="viewcode-block" id="PhotoViewer.mousePressEvent"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.PhotoViewer.mousePressEvent">[문서]</a>    <span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1"># if self._photo.isUnderMouse():</span>
        <span class="c1">#     self.photoClicked.emit(QtCore.QPoint(event.pos()))</span>

        <span class="c1"># PhotoViewer에서 마우스 오른쪽 클릭하면</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">RightButton</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mouse Right Button press event&#39;</span><span class="p">)</span>
            <span class="c1"># 1. ROI rubberBand 그리기 시작</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">QPoint</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberBand</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QRect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">,</span> <span class="n">QSize</span><span class="p">()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberBand</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PhotoViewer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>


<div class="viewcode-block" id="PhotoViewer.mouseMoveEvent"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.PhotoViewer.mouseMoveEvent">[문서]</a>    <span class="k">def</span> <span class="nf">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>

        <span class="c1"># PhotoViewer에서 마우스 움직이면, rubberBand 그리기</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">isNull</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberBand</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">QRect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span><span class="o">.</span><span class="n">normalized</span><span class="p">())</span></div>



<div class="viewcode-block" id="PhotoViewer.mouseReleaseEvent"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.PhotoViewer.mouseReleaseEvent">[문서]</a>    <span class="k">def</span> <span class="nf">mouseReleaseEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>

        <span class="c1"># PhotoViewer에서 마우스를 떼면, rubberBand 고정</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">RightButton</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mouse Right Button release event&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">QPoint</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberBand</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PhotoViewer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="MyRubberBand"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.MyRubberBand">[문서]</a><span class="k">class</span> <span class="nc">MyRubberBand</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QRubberBand</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">QRubberBand_Shape</span><span class="p">,</span> <span class="n">QWidget_parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MyRubberBand</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">QRubberBand_Shape</span><span class="p">,</span> <span class="n">QWidget_parent</span><span class="p">)</span>
        <span class="n">palette</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPalette</span><span class="p">()</span>
        <span class="n">palette</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPalette</span><span class="o">.</span><span class="n">WindowText</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QBrush</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPalette</span><span class="p">(</span><span class="n">palette</span><span class="p">)</span>


<div class="viewcode-block" id="MyRubberBand.paintEvent"><a class="viewcode-back" href="../../../graphics.html#pySphinx.src.graphics.MyRubberBand.paintEvent">[문서]</a>    <span class="k">def</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">QPaintEvent</span><span class="p">):</span>
        <span class="n">painter</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QStylePainter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># painter.begin(self)</span>
        <span class="n">pen</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPen</span><span class="p">()</span>
        <span class="c1"># pen.setStyle(QtCore.Qt.SolidLine)</span>
        <span class="c1"># pen.setColor(QtGui.QColor(QtCore.Qt.red))</span>
        <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">pen</span><span class="p">)</span>

        <span class="n">option</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QStyleOptionFocusRect</span><span class="p">()</span>
        <span class="n">option</span><span class="o">.</span><span class="n">initFrom</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">drawControl</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QStyle</span><span class="o">.</span><span class="n">CE_FocusFrame</span><span class="p">,</span> <span class="n">option</span><span class="p">)</span></div></div>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="k">import</span> <span class="n">QApplication</span><span class="p">,</span> <span class="n">QDesktopWidget</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    graphics = Graphics()</span>
<span class="sd">    graphics.setGeometry(0,0,QDesktopWidget().screenGeometry().width(), QDesktopWidget().screenGeometry().height())</span>
<span class="sd">    graphics.show()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">MyMainWindow</span><span class="p">()</span>
    <span class="n">w</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">QDesktopWidget</span><span class="p">()</span><span class="o">.</span><span class="n">availableGeometry</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="n">QDesktopWidget</span><span class="p">()</span><span class="o">.</span><span class="n">availableGeometry</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
    <span class="n">w</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, hojin

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>